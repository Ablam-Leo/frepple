/* frePPLe 4.0.0 2017-02-27
Copyright (C) 2010-2017 by frePPLe bvba

This library is free software; you can redistribute it and/or modify it
under the terms of the GNU Affero General Public License as published
by the Free Software Foundation; either version 3 of the License, or
(at your option) any later version.

This library is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
General Public License for more details.

You should have received a copy of the GNU Affero General Public
License along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";function showbufferspanelDrv(a){function b(a,b,c,d){var e='<table class="table"><thead><tr><td><b style="text-transform: capitalize;">'+gettext("buffer")+'</b></td><td><b style="text-transform: capitalize;">'+gettext("quantity")+'</b></td><td><b style="text-transform: capitalize;">'+gettext("onhand")+'</b></td><td><b style="text-transform: capitalize;">'+gettext("date")+"</b></td></tr></thead><tbody></tbody></table>";a.$watch("operationplan.id",function(){angular.element(document).find("#attributes-operationflowplans").empty().append(e);var b='<tr><td colspan="3">'+gettext("no movements")+"<td></tr>";"undefined"!=typeof a.operationplan&&a.operationplan.hasOwnProperty("flowplans")&&(b="",angular.forEach(a.operationplan.flowplans,function(a){b+="<tr><td>"+a.buffer.name+"</td><td>"+a.quantity+"</td><td>"+a.onhand+"</td><td>"+a.date+"</td></tr>"})),angular.element(document).find("#attributes-operationflowplans tbody").append(b)})}var c={restrict:"EA",scope:{operationplan:"=data"},link:b};return c}function showoperationpeggingpanelDrv(a){function b(a,b,c,d){var e='<table class="table"><thead><tr><td><b style="text-transform: capitalize;">'+gettext("demand")+'</b></td><td><b style="text-transform: capitalize;">'+gettext("quantity")+"</b></td><tbody></tbody></table>";a.$watch("operationplan.id",function(){angular.element(document).find("#attributes-operationdemandpegging").empty().append(e);var b='<tr><td colspan="2">'+gettext("no demands")+"<td></tr>";"undefined"!=typeof a.operationplan&&a.operationplan.hasOwnProperty("pegging_demand")&&(b="",angular.forEach(a.operationplan.pegging_demand,function(a){b+="<tr><td>"+a.demand.name+"</td><td>"+a.quantity+"</td></tr>"})),angular.element(document).find("#attributes-operationdemandpegging tbody").append(b)})}var c={restrict:"EA",scope:{operationplan:"=data"},link:b};return c}function operationplanCtrl(a,b){function c(c){var d=jQuery("#grid").getRowData(c);"number"==typeof parseInt(d.id)?(a.operationplan.id=parseInt(d.id),a.operationplan.get().catch(function(a){errorPopup(a.data)})):(a.operationplan=new b,console.log(operationplan.id),$("#save").removeClass("btn-primary btn-danger").addClass("btn-primary").prop("disabled","disabled"),$("#undo").removeClass("btn-primary btn-danger").addClass("btn-primary").prop("disabled","disabled"))}a.test="angular controller",a.operationplan=new b,a.$watchGroup(["operationplan.id","operationplan.start","operationplan.end","operationplan.quantity","operationplan.status"],function(b,c){c[0]===b[0]&&"undefined"!=typeof c[0]&&(angular.element(document).find("#"+a.operationplan.id).addClass("edited"),"undefined"!=typeof c[1]&&c[1]!==b[1]&&(angular.element(document).find("#grid").jqGrid("setCell",a.operationplan.id,"startdate",a.operationplan.start,"dirty-cell"),$("#save").removeClass("btn-primary btn-danger").addClass("btn-danger").prop("disabled",!1),$("#undo").removeClass("btn-primary btn-danger").addClass("btn-danger").prop("disabled",!1)),"undefined"!=typeof c[2]&&c[2]!==b[2]&&(jQuery("#grid").jqGrid("setCell",a.operationplan.id,"enddate",a.operationplan.end,"dirty-cell"),$("#save").removeClass("btn-primary btn-danger").addClass("btn-danger").prop("disabled",!1),$("#undo").removeClass("btn-primary btn-danger").addClass("btn-danger").prop("disabled",!1)),"undefined"!=typeof c[3]&&c[3]!==b[3]&&(jQuery("#grid").jqGrid("setCell",a.operationplan.id,"quantity",a.operationplan.quantity,"dirty-cell"),$("#save").removeClass("btn-primary btn-danger").addClass("btn-danger").prop("disabled",!1),$("#undo").removeClass("btn-primary btn-danger").addClass("btn-danger").prop("disabled",!1)),"undefined"!=typeof c[4]&&c[4]!==b[4]&&(jQuery("#grid").jqGrid("setCell",a.operationplan.id,"status",a.operationplan.status,"dirty-cell"),$("#save").removeClass("btn-primary btn-danger").addClass("btn-danger").prop("disabled",!1),$("#undo").removeClass("btn-primary btn-danger").addClass("btn-danger").prop("disabled",!1))),c[0]=b[0],c[1]=b[1],c[2]=b[2],c[3]=b[3],c[4]=b[4]}),a.displayInfo=c}function showproblemspanelDrv(a){function b(a,b,c){var d='<table class="table"><thead><tr><td><b style="text-transform: capitalize;">'+gettext("problems")+'</b></td><td><b style="text-transform: capitalize;">'+gettext("start")+'</b></td><td><b style="text-transform: capitalize;">'+gettext("end")+"</b></td></tr></thead><tbody></tbody></table>";a.$watch("operationplan.id",function(){angular.element(document).find("#attributes-operationproblems").empty().append(d);var b='<tr><td colspan="3">'+gettext("no problems")+"<td></tr>";"undefined"!=typeof a.operationplan&&a.operationplan.hasOwnProperty("problems")&&(b="",angular.forEach(a.operationplan.problems,function(a){b+="<tr><td>"+a.description+"</td>"+a.start+"<td></td>"+a.end+"<td></tr>"})),angular.element(document).find("#attributes-operationproblems tbody").append(b)})}var c={restrict:"EA",scope:{operationplan:"=data"},link:b};return c}function showresourcespanelDrv(a){function b(a,b,c,d){var e='<table class="table"><thead><tr><td><b style="text-transform: capitalize;">'+gettext("resource")+'</b></td><td><b style="text-transform: capitalize;">'+gettext("quantity")+"</b></td><tbody></tbody></table>";a.$watch("operationplan.id",function(){angular.element(document).find("#attributes-operationresources").empty().append(e);var b='<tr><td colspan="2">'+gettext("no resources")+"<td></tr>";"undefined"!=typeof a.operationplan&&a.operationplan.hasOwnProperty("loadplans")&&(b="",angular.forEach(a.operationplan.loadplans,function(a){b+="<tr><td>"+a.resource.name+"</td><td>"+a.quantity+"</td></tr>"})),angular.element(document).find("#attributes-operationresources tbody").append(b)})}var c={restrict:"EA",scope:{operationplan:"=data"},link:b};return c}angular.module("operationplandetailapp").directive("showbufferspanelDrv",showbufferspanelDrv),showbufferspanelDrv.$inject=["$window"],angular.module("operationplandetailapp").directive("showoperationpeggingpanelDrv",showoperationpeggingpanelDrv),showoperationpeggingpanelDrv.$inject=["$window"];var operationplandetailapp=angular.module("operationplandetailapp",["ngCookies","gettext","ngWebSocket","frepple.input","frepple.common"],["$locationProvider",function(a){a.html5Mode({enabled:!0,requireBase:!1})}]);operationplandetailapp.config(["$httpProvider",function(a){a.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",a.defaults.xsrfCookieName="csrftoken",a.defaults.xsrfHeaderName="X-CSRFToken"}]),operationplandetailapp.run(["gettextCatalog",function(a){a.setCurrentLanguage(language)}]),operationplandetailapp.filter("formatdate",function(){return function(a){if("undefined"!=typeof a)return moment(a).format("YYYY-MM-DD HH:mm:ss")}}),angular.module("operationplandetailapp").controller("operationplandetailCtrl",operationplanCtrl),operationplanCtrl.$inject=["$scope","OperationPlan"],angular.module("operationplandetailapp").directive("showproblemspanelDrv",showproblemspanelDrv),showproblemspanelDrv.$inject=["$window"],angular.module("operationplandetailapp").directive("showresourcespanelDrv",showresourcespanelDrv),showresourcespanelDrv.$inject=["$window"];
//# sourceMappingURL=frepple-operationplandetail.min.js.map